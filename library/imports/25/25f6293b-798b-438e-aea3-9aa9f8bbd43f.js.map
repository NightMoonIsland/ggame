{"version":3,"sources":["assets/script/tool/socket.io.js"],"names":["f","exports","module","define","amd","g","window","global","self","io","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","url","parser","Manager","debug","lookup","cache","managers","uri","opts","undefined","parsed","source","id","path","sameNamespace","nsps","newConnection","forceNew","multiplex","socket","protocol","connect","Socket","eio","Emitter","on","bind","indexOf","Backoff","has","Object","prototype","hasOwnProperty","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","min","max","jitter","timeout","readyState","connecting","lastPing","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","open","emitAll","emit","apply","arguments","nsp","updateSocketIds","engine","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","fn","skipReconnect","openSub","onopen","errorSub","data","cleanup","err","timer","setTimeout","destroy","close","push","clearTimeout","onping","Date","onpong","ondata","add","ondecoded","packet","onerror","onConnecting","index","splice","encode","encodedPackets","write","options","processPacketQueue","pack","shift","sub","disconnect","reset","onclose","reason","delay","duration","onreconnect","attempt","obj","ev","removeListener","toArray","hasBin","events","connect_error","connect_timeout","error","reconnect_attempt","reconnect_failed","reconnect_error","ping","pong","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","subEvents","send","args","unshift","parserType","EVENT","BINARY_EVENT","type","compress","flags","pop","CONNECT","onpacket","onconnect","onevent","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","parseuri","loc","location","host","charAt","test","port","ipv6","href","after","count","callback","err_cb","bail","noop","proxy","result","arraybuffer","start","end","bytes","byteLength","slice","ArrayBuffer","abv","Uint8Array","ii","buffer","ms","factor","Math","pow","rand","random","deviation","floor","chars","charCodeAt","len","base64","substring","decode","bufferLength","p","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","size","blobSupportsArrayBufferView","b","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","concat","mixin","key","addEventListener","event","_callbacks","once","off","removeAllListeners","removeEventListener","callbacks","cb","listeners","hasListeners","constructor","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","document","documentElement","style","console","firebug","exception","table","navigator","userAgent","toLowerCase","match","parseInt","RegExp","$1","formatters","j","JSON","stringify","namespace","humanize","diff","c","color","Array","lastC","replace","Function","namespaces","removeItem","enable","localStorage","coerce","disable","enabled","names","skips","prevColor","prevTime","selectColor","disabled","curr","prev","format","formatter","val","logFn","split","substr","name","stack","message","transports","parsejson","parseqs","hostname","secure","query","agent","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","writeBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","freeGlobal","extraHeaders","keys","priorWebsocketSuccess","Transport","createTransport","clone","EIO","transport","sid","setTransport","onDrain","onPacket","onError","onClose","probe","failed","onTransportOpen","upgradeLosesBinary","supportsBinary","msg","upgrading","pause","flush","freezeTransport","onTransportClose","onupgrade","to","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","pingTimeoutTimer","pingIntervalTimer","sendPacket","prevBufferLen","writable","waitForUpgrade","cleanupAndClose","desc","filteredUpgrades","description","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","parentNode","removeChild","form","iframe","doPoll","createElement","async","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","doWrite","area","iframeId","className","position","top","left","target","method","setAttribute","action","complete","initIframe","html","value","submit","attachEvent","onreadystatechange","onload","Request","request","isBinary","req","sendXhr","pollXhr","create","setDisableHeaderCheck","setRequestHeader","responseType","withCredentials","hasXDR","onLoad","responseText","status","requestsCount","requests","onSuccess","fromError","abort","contentType","getResponseHeader","response","String","fromCharCode","ui8Arr","dataArray","idx","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","onPause","pending","total","decodePayload","callbackfn","encodePayload","schema","b64","BrowserWebSocket","WebSocket","MozWebSocket","WS","check","protocols","headers","ws","supports","binary","addEventListeners","onmessage","encodePacket","Buffer","done","hasCORS","ActiveXObject","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","dontSendBlobs","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","blob","readAsDataURL","b64data","typed","basic","btoa","utf8decode","decodeBase64Packet","Number","asArray","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","map","results","join","each","next","eachWithIndex","el","decodePayloadAsBinary","chr","ret","totalLength","reduce","acc","toString","resultArray","bufferIndex","forEach","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","arr","isArray","_hasBinary","isBuffer","File","toJSON","isLoader","objectTypes","freeExports","nodeType","root","runInContext","context","SyntaxError","TypeError","nativeJSON","parse","objectProto","getClass","isProperty","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isSupported","serialized","stringifySupported","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","__proto__","original","parent","object","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","width","unicodePrefix","quote","useCharIndex","symbols","charCode","serialize","properties","whitespace","indentation","date","time","hours","minutes","seconds","milliseconds","element","prefix","filter","Unescapes","Index","Source","lex","begin","isSigned","get","hasMembers","update","walk","previousJSON","isRestored","JSON3","m","h","d","y","long","short","str","exec","parseFloat","round","plural","ceil","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","re","parts","authority","ipv6uri","isBuf","deconstructPacket","packetData","_deconstructPacket","placeholder","_placeholder","num","newData","attachments","reconstructPacket","curPlaceHolder","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","types","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","list","array","freeModule","stringFromCharCode","ucs2decode","string","output","counter","extra","ucs2encode","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","alphabet","seed","decoded","now"],"mappings":"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","file":"unknown","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = _dereq_('./url');\nvar parser = _dereq_('socket.io-parser');\nvar Manager = _dereq_('./manager');\nvar debug = _dereq_('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup(uri, opts) {\n  if (typeof uri == 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n\n  return io.socket(parsed.path);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = _dereq_('./manager');\nexports.Socket = _dereq_('./socket');\n\n},{\"./manager\":2,\"./socket\":4,\"./url\":5,\"debug\":14,\"socket.io-parser\":40}],2:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = _dereq_('engine.io-client');\nvar Socket = _dereq_('./socket');\nvar Emitter = _dereq_('component-emitter');\nvar parser = _dereq_('socket.io-parser');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:manager');\nvar indexOf = _dereq_('indexof');\nvar Backoff = _dereq_('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager(uri, opts){\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' == typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  this.encoder = new parser.Encoder();\n  this.decoder = new parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function() {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function(){\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.engine.id;\n    }\n  }\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function(v){\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function(v){\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function(v){\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function(v){\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function(v){\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function(v){\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function() {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function(fn){\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function() {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function(data){\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function(){\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function(){\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function(){\n  this.lastPing = new Date;\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function(){\n  this.emitAll('pong', new Date - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function(data){\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function(packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function(err){\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function(nsp){\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function(){\n      socket.id = self.engine.id;\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting evnet is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting() {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function(socket){\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function(packet){\n  debug('writing packet %j', packet);\n  var self = this;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function(encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function() {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function(){\n  debug('cleanup');\n\n  var sub;\n  while (sub = this.subs.shift()) sub.destroy();\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function(){\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' == this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function(reason){\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function(){\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function(){\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function(err){\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function(){\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function(){\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":3,\"./socket\":4,\"backo2\":8,\"component-bind\":11,\"component-emitter\":12,\"debug\":14,\"engine.io-client\":16,\"indexof\":32,\"socket.io-parser\":40}],3:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function(){\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],4:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('socket.io-parser');\nvar Emitter = _dereq_('component-emitter');\nvar toArray = _dereq_('to-array');\nvar on = _dereq_('./on');\nvar bind = _dereq_('component-bind');\nvar debug = _dereq_('debug')('socket.io-client:socket');\nvar hasBin = _dereq_('has-binary');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket(io, nsp){\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function() {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function(){\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' == this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function(){\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function(ev){\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var parserType = parser.EVENT; // default\n  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n  var packet = { type: parserType, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' == typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function(packet){\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function(){\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' != this.nsp) {\n    this.packet({ type: parser.CONNECT });\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function(reason){\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function(packet){\n  if (packet.nsp != this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function(packet){\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function(id){\n  var self = this;\n  var sent = false;\n  return function(){\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n    self.packet({\n      type: type,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function(packet){\n  var ack = this.acks[packet.id];\n  if ('function' == typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function(){\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function(){\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function(){\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function(){\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function(){\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function(compress){\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":3,\"component-bind\":11,\"component-emitter\":12,\"debug\":14,\"has-binary\":30,\"socket.io-parser\":40,\"to-array\":43}],5:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = _dereq_('parseuri');\nvar debug = _dereq_('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url(uri, loc){\n  var obj = uri;\n\n  // default to window.location\n  var loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' == typeof uri) {\n    if ('/' == uri.charAt(0)) {\n      if ('/' == uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' != typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    }\n    else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"debug\":14,\"parseuri\":38}],6:[function(_dereq_,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],7:[function(_dereq_,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],8:[function(_dereq_,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],9:[function(_dereq_,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n\n},{}],10:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],11:[function(_dereq_,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],12:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],13:[function(_dereq_,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],14:[function(_dereq_,module,exports){\n\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = _dereq_('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n},{\"./debug\":15}],15:[function(_dereq_,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = _dereq_('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":35}],16:[function(_dereq_,module,exports){\n\nmodule.exports =  _dereq_('./lib/');\n\n},{\"./lib/\":17}],17:[function(_dereq_,module,exports){\n\nmodule.exports = _dereq_('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = _dereq_('engine.io-parser');\n\n},{\"./socket\":18,\"engine.io-parser\":27}],18:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = _dereq_('./transports');\nvar Emitter = _dereq_('component-emitter');\nvar debug = _dereq_('debug')('engine.io-client:socket');\nvar index = _dereq_('indexof');\nvar parser = _dereq_('engine.io-parser');\nvar parseuri = _dereq_('parseuri');\nvar parsejson = _dereq_('parsejson');\nvar parseqs = _dereq_('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Noop function.\n *\n * @api private\n */\n\nfunction noop(){}\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket(uri, opts){\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' == typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure :\n    (global.location && 'https:' == location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port ?\n       location.port :\n       (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global == 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n  }\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = _dereq_('./transport');\nSocket.transports = _dereq_('./transports');\nSocket.parser = _dereq_('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    agent: this.agent,\n    hostname: this.hostname,\n    port: this.port,\n    secure: this.secure,\n    path: this.path,\n    query: query,\n    forceJSONP: this.forceJSONP,\n    jsonp: this.jsonp,\n    forceBase64: this.forceBase64,\n    enablesXDR: this.enablesXDR,\n    timestampRequests: this.timestampRequests,\n    timestampParam: this.timestampParam,\n    policyPort: this.policyPort,\n    socket: this,\n    pfx: this.pfx,\n    key: this.key,\n    passphrase: this.passphrase,\n    cert: this.cert,\n    ca: this.ca,\n    ciphers: this.ciphers,\n    rejectUnauthorized: this.rejectUnauthorized,\n    perMessageDeflate: this.perMessageDeflate,\n    extraHeaders: this.extraHeaders\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function() {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function(transport){\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function(){\n    self.onDrain();\n  })\n  .on('packet', function(packet){\n    self.onPacket(packet);\n  })\n  .on('error', function(e){\n    self.onError(e);\n  })\n  .on('close', function(){\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 })\n    , failed = false\n    , self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen(){\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' == msg.type && 'probe' == msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' == self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport() {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  //Handle any error that happens while probing\n  function onerror(err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose(){\n    onerror(\"transport closed\");\n  }\n\n  //When the socket is closed while we're probing\n  function onclose(){\n    onerror(\"socket closed\");\n  }\n\n  //When the socket is upgraded while we're probing\n  function onupgrade(to){\n    if (transport && to.name != transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  //Remove all listeners on the transport and on self\n  function cleanup(){\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if  ('closed' == this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' == self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function(){\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function() {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' != this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if('function' == typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' == typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' == this.readyState || 'closed' == this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function() {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close() {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose() {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade() {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i<j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./transport\":19,\"./transports\":20,\"component-emitter\":26,\"debug\":14,\"engine.io-parser\":27,\"indexof\":32,\"parsejson\":36,\"parseqs\":37,\"parseuri\":38}],19:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = _dereq_('engine.io-parser');\nvar Emitter = _dereq_('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' == this.readyState || '' == this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' == this.readyState || 'open' == this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function(packets){\n  if ('open' == this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function(data){\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":26,\"engine.io-parser\":27}],20:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar XHR = _dereq_('./polling-xhr');\nvar JSONP = _dereq_('./polling-jsonp');\nvar websocket = _dereq_('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts){\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname != location.hostname || port != opts.port;\n    xs = opts.secure != isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling-jsonp\":21,\"./polling-xhr\":22,\"./websocket\":24,\"xmlhttprequest-ssl\":25}],21:[function(_dereq_,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = _dereq_('./polling');\nvar inherit = _dereq_('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Callbacks count.\n */\n\nvar index = 0;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function(e){\n    self.onError('jsonp poll error',e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  }\n  else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n  \n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch(e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function(){\n      if (self.iframe.readyState == 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":23,\"component-inherit\":13}],22:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\nvar Polling = _dereq_('./polling');\nvar Emitter = _dereq_('component-emitter');\nvar inherit = _dereq_('component-inherit');\nvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty(){}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR(opts){\n  Polling.call(this, opts);\n\n  if (global.location) {\n    var isSSL = 'https:' == location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname != global.location.hostname ||\n      port != opts.port;\n    this.xs = opts.secure != isSSL;\n  } else {\n    this.extraHeaders = opts.extraHeaders;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function(opts){\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function(data, fn){\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function(err){\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function(){\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function(data){\n    self.onData(data);\n  });\n  req.on('error', function(err){\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request(opts){\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined != opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function(){\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n    if (this.supportsBinary) {\n      // This has to be done after open because Firefox is stupid\n      // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n      xhr.responseType = 'arraybuffer';\n    }\n\n    if ('POST' == this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function(){\n        self.onLoad();\n      };\n      xhr.onerror = function(){\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function(){\n        if (4 != xhr.readyState) return;\n        if (200 == xhr.status || 1223 == xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function(){\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function() {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function(){\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function(data){\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function(err){\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function(fromError){\n  if ('undefined' == typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch(e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function(){\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response;\n    } else {\n      if (!this.supportsBinary) {\n        data = this.xhr.responseText;\n      } else {\n        try {\n          data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n        } catch (e) {\n          var ui8Arr = new Uint8Array(this.xhr.response);\n          var dataArray = [];\n          for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n            dataArray.push(ui8Arr[idx]);\n          }\n\n          data = String.fromCharCode.apply(null, dataArray);\n        }\n      }\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function(){\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (global.document) {\n  Request.requestsCount = 0;\n  Request.requests = {};\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./polling\":23,\"component-emitter\":26,\"component-inherit\":13,\"debug\":14,\"xmlhttprequest-ssl\":25}],23:[function(_dereq_,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parseqs = _dereq_('parseqs');\nvar parser = _dereq_('engine.io-parser');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function() {\n  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function(){\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function(onPause){\n  var pending = 0;\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause(){\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function(){\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function(){\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function(){\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function(data){\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function(packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' == self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' == packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' != this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' == this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function(){\n  var self = this;\n\n  function close(){\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' == this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n  var callbackfn = function() {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  var self = this;\n  parser.encodePayload(packets, this.supportsBinary, function(data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' == schema && this.port != 443) ||\n     ('http' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":19,\"component-inherit\":13,\"debug\":14,\"engine.io-parser\":27,\"parseqs\":37,\"xmlhttprequest-ssl\":25,\"yeast\":45}],24:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = _dereq_('../transport');\nvar parser = _dereq_('engine.io-parser');\nvar parseqs = _dereq_('parseqs');\nvar inherit = _dereq_('component-inherit');\nvar yeast = _dereq_('yeast');\nvar debug = _dereq_('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  try {\n    WebSocket = _dereq_('ws');\n  } catch (e) { }\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS(opts){\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function(){\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var self = this;\n  var uri = this.uri();\n  var protocols = void(0);\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n\n  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'buffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function(){\n  var self = this;\n\n  this.ws.onopen = function(){\n    self.onOpen();\n  };\n  this.ws.onclose = function(){\n    self.onClose();\n  };\n  this.ws.onmessage = function(ev){\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function(e){\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Override `onData` to use a timer on iOS.\n * See: https://gist.github.com/mloughran/2052006\n *\n * @api private\n */\n\nif ('undefined' != typeof navigator\n  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n  WS.prototype.onData = function(data){\n    var self = this;\n    setTimeout(function(){\n      Transport.prototype.onData.call(self, data);\n    }, 0);\n  };\n}\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function(packets){\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function(packet) {\n      parser.encodePacket(packet, self.supportsBinary, function(data) {\n        if (!BrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        //Sometimes the websocket has already been closed but the browser didn't\n        //have a chance of informing us about it yet, in that case send will\n        //throw an error\n        try {\n          if (BrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e){\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done(){\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function(){\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function(){\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function(){\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function(){\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' == schema && this.port != 443)\n    || ('ws' == schema && this.port != 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function(){\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"../transport\":19,\"component-inherit\":13,\"debug\":14,\"engine.io-parser\":27,\"parseqs\":37,\"ws\":undefined,\"yeast\":45}],25:[function(_dereq_,module,exports){\n// browser shim for xmlhttprequest module\nvar hasCORS = _dereq_('has-cors');\n\nmodule.exports = function(opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    } catch(e) { }\n  }\n}\n\n},{\"has-cors\":31}],26:[function(_dereq_,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],27:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = _dereq_('./keys');\nvar hasBinary = _dereq_('has-binary');\nvar sliceBuffer = _dereq_('arraybuffer.slice');\nvar base64encoder = _dereq_('base64-arraybuffer');\nvar after = _dereq_('after');\nvar utf8 = _dereq_('utf8');\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = navigator.userAgent.match(/Android/i);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = _dereq_('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if ('function' == typeof supportsBinary) {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if ('function' == typeof utf8encode) {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  // String data\n  if (typeof data == 'string' || data === undefined) {\n    if (data.charAt(0) == 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      try {\n        data = utf8.decode(data);\n      } catch (e) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!global.ArrayBuffer) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary == 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data != 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data == '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = ''\n    , n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (':' != chr) {\n      length += chr;\n    } else {\n      if ('' == length || (length != (n = Number(length)))) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      msg = data.substr(i + 1, n);\n\n      if (length != msg.length) {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      if (msg.length) {\n        packet = exports.decodePacket(msg, binaryType, true);\n\n        if (err.type == packet.type && err.data == packet.data) {\n          // parser error in individual packet - ignoring payload\n          return callback(err, 0, 1);\n        }\n\n        var ret = callback(packet, i + n, l);\n        if (false === ret) return;\n      }\n\n      // advance cursor\n      i += n;\n      length = '';\n    }\n  }\n\n  if (length != '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  var numberTooLong = false;\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] == 255) break;\n\n      if (msgLength.length > 310) {\n        numberTooLong = true;\n        break;\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    if(numberTooLong) return callback(err, 0, 1);\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./keys\":28,\"after\":6,\"arraybuffer.slice\":7,\"base64-arraybuffer\":9,\"blob\":10,\"has-binary\":29,\"utf8\":44}],28:[function(_dereq_,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],29:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      if (obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":33}],30:[function(_dereq_,module,exports){\n(function (global){\n\n/*\n * Module requirements.\n */\n\nvar isArray = _dereq_('isarray');\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Right now only Buffer and ArrayBuffer are supported..\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary(data) {\n\n  function _hasBinary(obj) {\n    if (!obj) return false;\n\n    if ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n         (global.Blob && obj instanceof Blob) ||\n         (global.File && obj instanceof File)\n        ) {\n      return true;\n    }\n\n    if (isArray(obj)) {\n      for (var i = 0; i < obj.length; i++) {\n          if (_hasBinary(obj[i])) {\n              return true;\n          }\n      }\n    } else if (obj && 'object' == typeof obj) {\n      // see: https://github.com/Automattic/has-binary/pull/4\n      if (obj.toJSON && 'function' == typeof obj.toJSON) {\n        obj = obj.toJSON();\n      }\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return _hasBinary(data);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"isarray\":33}],31:[function(_dereq_,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],32:[function(_dereq_,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],33:[function(_dereq_,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],34:[function(_dereq_,module,exports){\n(function (global){\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],35:[function(_dereq_,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],36:[function(_dereq_,module,exports){\n(function (global){\n/**\n * JSON parse.\n *\n * @see Based on jQuery#parseJSON (MIT) and JSON2\n * @api private\n */\n\nvar rvalidchars = /^[\\],:{}\\s]*$/;\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\nvar rtrimLeft = /^\\s+/;\nvar rtrimRight = /\\s+$/;\n\nmodule.exports = function parsejson(data) {\n  if ('string' != typeof data || !data) {\n    return null;\n  }\n\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n  // Attempt to parse using the native JSON parser first\n  if (global.JSON && JSON.parse) {\n    return JSON.parse(data);\n  }\n\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\n      .replace(rvalidtokens, ']')\n      .replace(rvalidbraces, ''))) {\n    return (new Function('return ' + data))();\n  }\n};\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],37:[function(_dereq_,module,exports){\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n\n},{}],38:[function(_dereq_,module,exports){\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    return uri;\n};\n\n},{}],39:[function(_dereq_,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = _dereq_('isarray');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet){\n  var buffers = [];\n  var packetData = packet.data;\n\n  function _deconstructPacket(data) {\n    if (!data) return data;\n\n    if (isBuf(data)) {\n      var placeholder = { _placeholder: true, num: buffers.length };\n      buffers.push(data);\n      return placeholder;\n    } else if (isArray(data)) {\n      var newData = new Array(data.length);\n      for (var i = 0; i < data.length; i++) {\n        newData[i] = _deconstructPacket(data[i]);\n      }\n      return newData;\n    } else if ('object' == typeof data && !(data instanceof Date)) {\n      var newData = {};\n      for (var key in data) {\n        newData[key] = _deconstructPacket(data[key]);\n      }\n      return newData;\n    }\n    return data;\n  }\n\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  var curPlaceHolder = 0;\n\n  function _reconstructPacket(data) {\n    if (data && data._placeholder) {\n      var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n      return buf;\n    } else if (isArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        data[i] = _reconstructPacket(data[i]);\n      }\n      return data;\n    } else if (data && 'object' == typeof data) {\n      for (var key in data) {\n        data[key] = _reconstructPacket(data[key]);\n      }\n      return data;\n    }\n    return data;\n  }\n\n  packet.data = _reconstructPacket(packet.data);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((global.Blob && obj instanceof Blob) ||\n        (global.File && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{\"./is-buffer\":41,\"isarray\":33}],40:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = _dereq_('debug')('socket.io-parser');\nvar json = _dereq_('json3');\nvar isArray = _dereq_('isarray');\nvar Emitter = _dereq_('component-emitter');\nvar binary = _dereq_('./binary');\nvar isBuf = _dereq_('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n  var str = '';\n  var nsp = false;\n\n  // first is type\n  str += obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n    str += obj.attachments;\n    str += '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' != obj.nsp) {\n    nsp = true;\n    str += obj.nsp;\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    if (nsp) {\n      str += ',';\n      nsp = false;\n    }\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    if (nsp) str += ',';\n    str += json.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if ('string' == typeof obj) {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var p = {};\n  var i = 0;\n\n  // look up type\n  p.type = Number(str.charAt(0));\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n    var buf = '';\n    while (str.charAt(++i) != '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) != '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' == str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' == c) break;\n      p.nsp += c;\n      if (i == str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i == str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    try {\n      p.data = json.parse(str.substr(i));\n    } catch(e){\n      return error();\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(data){\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":39,\"./is-buffer\":41,\"component-emitter\":42,\"debug\":14,\"isarray\":33,\"json3\":34}],41:[function(_dereq_,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],42:[function(_dereq_,module,exports){\narguments[4][26][0].apply(exports,arguments)\n},{\"dup\":26}],43:[function(_dereq_,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],44:[function(_dereq_,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n},{}],45:[function(_dereq_,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}]},{},[1])(1)\n});\n"]}