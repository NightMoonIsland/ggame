{"version":3,"sources":["assets/script/tool/viewManager.js"],"names":["cc","Class","properties","viewList","viewInfo","view","ctor","console","log","array1","require","status","pushBack","a","b","setRoot","node","root","onLoad","init","registView","viewName","module","title","length","changeView","empty","back","removeFromParent","idx","find","npos","len","getSize","remove","self","loader","loadRes","err","prefab","instantiate","director","getScene","getChildByName","addChild","curView","tool","eventManager","addEventListener","testAddChild","testWorkListener","releaseRes","varName","backPreview"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACL;;AAEAC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,kBAAU,IAXF;AAYRC,kBAAU,EAZF;AAaRC,cAAM;AAbE,KAHP;;AAmBLC,UAAM,gBAAW;AACbC,gBAAQC,GAAR,CAAY,UAAZ;AACA,YAAIC,SAASC,QAAQ,QAAR,CAAb;AACA,aAAKP,QAAL,GAAgB,IAAIM,MAAJ,EAAhB;AACA;AACA,aAAKN,QAAL,CAAcQ,MAAd;AACA,aAAKR,QAAL,CAAcS,QAAd,CAAuB,EAACC,GAAE,CAAH,EAAMC,GAAE,CAAR,EAAvB;AACA,aAAKX,QAAL,CAAcQ,MAAd;AAEH,KA5BI;;AA8BLI,aAAS,iBAASC,IAAT,EAAe;AACpB,aAAKC,IAAL,GAAYD,IAAZ;AACH,KAhCI;;AAkCL;AACAE,YAAQ,kBAAY;AAChB;;AAEA;AACA;AACH,KAxCI;;AA0CL;AACA;;AAEA;;AAEAC,UAAM,gBAAU;AACZ,aAAKf,QAAL,GAAgB,EAAhB;AACAG,gBAAQC,GAAR,CAAY,WAAZ;AACA,aAAKJ,QAAL,CAAc,MAAd,IAAwB,EAACS,GAAE,CAAH,EAAMC,GAAE,CAAR,EAAxB;AACAP,gBAAQC,GAAR,CAAY,WAAZ;AACH,KApDI;;AAsDLY,cAtDK,sBAsDMC,QAtDN,EAsDgBC,MAtDhB,EAsDwBC,KAtDxB,EAsD8B;AAC/B,aAAKnB,QAAL,CAAciB,QAAd,IAA0B,EAACA,UAASA,QAAV,EAAoBC,QAAOA,MAA3B,EAAmCC,OAAMA,KAAzC,EAA1B;;AAEA,YAAInB,WAAW,KAAKA,QAAL,CAAciB,QAAd,CAAf;AACA,aAAKjB,QAAL,CAAc,CAAd,IAAmB,OAAnB;AACA,aAAKA,QAAL,CAAc,CAAd,IAAmB,OAAnB;AACAG,gBAAQC,GAAR,CAAYJ,QAAZ;AACAG,gBAAQC,GAAR,CAAY,KAAKJ,QAAL,CAAcoB,MAA1B;AACH,KA9DI;;;AAgELC,gBAAY,oBAASJ,QAAT,EAAkB;AAC1B,YAAG,CAAC,KAAKlB,QAAL,CAAcuB,KAAd,EAAD,IAA0B,KAAKvB,QAAL,CAAcwB,IAAd,MAAwBN,QAArD,EAA8D;AAC1Dd,oBAAQC,GAAR,CAAY,cAAZ;AACA,mBAAO,KAAKH,IAAZ;AACH;;AAED,YAAID,WAAW,KAAKA,QAAL,CAAciB,QAAd,CAAf;;AAEA,YAAG,KAAKhB,IAAL,IAAa,IAAhB,EAAqB;AACjB,iBAAKA,IAAL,CAAUuB,gBAAV;AACH;;AAED,YAAIC,MAAM,KAAK1B,QAAL,CAAc2B,IAAd,CAAmBT,QAAnB,CAAV;AACA,YAAGQ,OAAO,KAAK1B,QAAL,CAAc4B,IAAxB,EAA6B;AACzB,gBAAIC,MAAM,KAAK7B,QAAL,CAAc8B,OAAd,KAA0BJ,GAApC;AACA,iBAAK1B,QAAL,CAAc+B,MAAd,CAAqBL,GAArB,EAA0BG,GAA1B;AACH,SAHD,MAII;AACA,iBAAK7B,QAAL,CAAcS,QAAd,CAAuBS,QAAvB;AACH;AACD,YAAIc,OAAO,IAAX;AACA;AACAnC,WAAGoC,MAAH,CAAUC,OAAV,CAAkB,mBAAlB,EAAuC,UAASC,GAAT,EAAcC,MAAd,EAAqB;AACxD,gBAAItB,OAAOjB,GAAGwC,WAAH,CAAeD,MAAf,CAAX;AACAJ,iBAAK9B,IAAL,GAAYY,IAAZ;AACAjB,eAAGyC,QAAH,CAAYC,QAAZ,GAAuBC,cAAvB,CAAsC,QAAtC,EAAgDC,QAAhD,CAAyD3B,IAAzD;AACH,SAJD;;AAMA,eAAO,KAAKZ,IAAZ;AACH,KA7FI;;AA+FLwC,aAAS,mBAAW;AAChB;AACA,YAAIV,OAAO,IAAX;AACAnC,WAAG8C,IAAH,CAAQC,YAAR,CAAqBC,gBAArB,CAAsC,QAAtC,EAAgDb,IAAhD,EAAsDA,KAAKc,YAA3D;AACAjD,WAAG8C,IAAH,CAAQC,YAAR,CAAqBG,gBAArB;AACA,aAAK7C,IAAL,CAAUuB,gBAAV,CAA2B,KAA3B;AACA5B,WAAGoC,MAAH,CAAUe,UAAV,CAAqB,mBAArB;AACH,KAtGI;;AAwGLF,kBAAc,sBAASG,OAAT,EAAiB;AAC3B,YAAGA,WAAW,QAAd,EAAuB;AACnB7C,oBAAQC,GAAR,CAAY,cAAZ;AACH,SAFD,MAGK,IAAG4C,UAAU,WAAb,EAAyB;AAC1B7C,oBAAQC,GAAR,CAAY,cAAZ;AACH;AAEJ,KAhHI;;AAkHL6C,iBAAa,uBAAU,CAEtB;AApHI,CAAT","file":"unknown","sourcesContent":["\n\ncc.Class({\n    // extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        viewList: null,\n        viewInfo: [],\n        view: null,\n    },\n\n    ctor: function() {\n        console.log(\"hhhehehe\");\n        var array1 = require(\"array1\");\n        this.viewList = new array1();\n        // this.array1 = new require(\"array1\");\n        this.viewList.status();\n        this.viewList.pushBack({a:1, b:2});\n        this.viewList.status();\n        \n    },\n\n    setRoot: function(node) {\n        this.root = node;\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        // console.log(\"hahahahha\");\n\n        // cc.variable.viewInfo.asfdfsdf();\n        // console.log(typeof this.viewName);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n\n    init: function(){\n        this.viewInfo = [];\n        console.log(\"to this 1\");\n        this.viewInfo[\"haha\"] = {a:1, b:2};\n        console.log(\"to this 2\");\n    },\n\n    registView(viewName, module, title){\n        this.viewInfo[viewName] = {viewName:viewName, module:module, title:title};\n\n        var viewInfo = this.viewInfo[viewName];\n        this.viewInfo[0] = \"hahah\";\n        this.viewInfo[1] = \"wocao\";\n        console.log(viewInfo);\n        console.log(this.viewInfo.length);\n    },\n\n    changeView: function(viewName){\n        if(!this.viewList.empty() && this.viewList.back() == viewName){\n            console.log(\"view is same\");\n            return this.view;\n        }\n\n        var viewInfo = this.viewInfo[viewName]\n\n        if(this.view != null){\n            this.view.removeFromParent();\n        }\n\n        var idx = this.viewList.find(viewName);\n        if(idx != this.viewList.npos){\n            var len = this.viewList.getSize() - idx;\n            this.viewList.remove(idx, len);\n        }\n        else{\n            this.viewList.pushBack(viewName);\n        }\n        var self = this;\n        //通过链接 加载的资源 必须放在resource下\n        cc.loader.loadRes(\"prefab/Test1Panel\", function(err, prefab){\n            var root = cc.instantiate(prefab);\n            self.view = root;\n            cc.director.getScene().getChildByName(\"Canvas\").addChild(root);\n        });\n        \n        return this.view;\n    },\n\n    curView: function() {\n        // this.testAddChild();\n        var self = this;\n        cc.tool.eventManager.addEventListener(\"hahaha\", self, self.testAddChild);\n        cc.tool.eventManager.testWorkListener()\n        this.view.removeFromParent(false);\n        cc.loader.releaseRes(\"prefab/Test1Panel\");\n    },\n\n    testAddChild: function(varName){\n        if(varName == \"hahaha\"){\n            console.log(\"wocao tamabi\");\n        }\n        else if(varName = \"wocaonima\"){\n            console.log(\"??? wodetian\");\n        }\n        \n    },\n\n    backPreview: function(){\n\n    },\n});\n"]}